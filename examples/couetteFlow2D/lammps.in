# sample LAMMPS input script for viscosity of 3d LJ liquid
# use tethered shearing wall, thermostat via fix langevin

#This is needed for bulk runs to allow job sizing 
processors 1 1 1

# Impose lj style fluid with Heat

dimension					3
boundary					p f p
units						lj
atom_modify 				map array

variable					skin equal 0.1

variable					minx equal -23.45
variable					maxx equal 23.45
variable					miny equal 0
variable					maxy equal 31.3
variable					minz equal 0
variable					maxz equal 4.81

variable					lattice equal 0.81
variable					atomMass equal 1

variable					epsilon equal 1
variable					sigma equal 1
variable					epsilonWF equal 0.6
variable					sigmaWF equal 1
variable					rCutOff equal 2.2*${sigma}

variable					T equal 1.1

variable					dt equal 0.005*0.1

variable					thickness equal 2

#atom_style					atomic
#neighbor					${skin} bin
#neigh_modify				delay 5

# create geometry

lattice						fcc ${lattice}
region						box block ${minx} ${maxx} ${miny} ${maxy} ${minz} ${maxz} units box
create_box					2 box
create_atoms				1 box

mass						1 ${atomMass}
mass						2 ${atomMass}

variable					minBx equal ${minx}
variable					maxBx equal ${maxx}
variable					minBy equal ${miny}
variable					maxBy equal ${miny}+${thickness}
variable					minBz equal ${minz}
variable					maxBz equal ${maxz}
region						bottom block ${minBx} ${maxBx} ${minBy} ${maxBy} ${minBz} ${maxBz} units box
set							region bottom type 2
group						boundary region bottom
group						moving subtract all boundary

# LJ potentials

#pair_style					hybrid lj/cut ${rCutOff} lj/cut ${rCutOff} #eam/alloy
pair_style					lj/cut ${rCutOff} 
pair_coeff					* * ${epsilon} ${sigma} ${rCutOff}
pair_modify					shift yes

velocity					moving create ${T} 482748 mom yes
velocity					boundary create 0 482748 mom yes
fix							1 all nve
fix 						2 all langevin ${T} ${T} 1 48279
#fix							cfd all couple/cfd couple_every 50 mpi
#fix							cfd2 all couple/cfd/force/md 1 50 50
fix 						freeze boundary setforce 0.0 0.0 0.0 #region bottom 
fix							topWall all wall/lj126 yhi ${maxy} ${epsilon} ${sigma} ${rCutOff} units box
#fix							topWall all wall/lj126 yhi ${maxy} ${epsilon} ${sigma} ${rCutOff} units box
#compute 					1 all pair/local dist eng fx fy fz
#fix							fxyz all ave/atom 1 1 50 fx fy fz f_fpotential[1] f_fpotential[2] f_fpotential[3]

# run with indenter

timestep					${dt}


thermo						100
#dump                        vtk all custom/vtk 5000 openfoam/dump*.vtk id type x y z vx vy vz fx fy fz
#dump						dmp all custom 101 ../DEM/post/dump.lammpstrj id type x y z vx vy vz #v_test
#dump						dmp all custom 50 ../DEM/post/dump.*.liggghts_init id type fx f_fxyz[1] f_fxyz[4] f_fpotential[1] f_avetimepotentialforce[1] f_avetimetotalforce[1]
#dump						dmp all custom 100 ../DEM/post/dump.*.liggghts_init vx f_avetimevelocity[1] vy f_avetimevelocity[2] vz f_avetimevelocity[3] fx f_avetimepotentialforce[1] fy f_avetimepotentialforce[2] fz f_avetimepotentialforce[3]
#dump						dmp all custom 100 ../DEM/post/dump.*.liggghts_init f_atomMass
run							5000

